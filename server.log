2025/11/20 23:05:34 Starting transaction queue processor (every 30 seconds)...
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /api/v1/health            --> healthy_pay_backend/internal/routes.SetupRoutes.func1 (4 handlers)
[GIN-debug] POST   /api/v1/auth/validate-email --> healthy_pay_backend/internal/handlers.(*AuthHandler).ValidateEmail-fm (4 handlers)
[GIN-debug] POST   /api/v1/auth/verify-email-otp --> healthy_pay_backend/internal/handlers.(*AuthHandler).VerifyEmailOTP-fm (4 handlers)
[GIN-debug] POST   /api/v1/auth/register     --> healthy_pay_backend/internal/handlers.(*AuthHandler).Register-fm (4 handlers)
[GIN-debug] POST   /api/v1/auth/login        --> healthy_pay_backend/internal/handlers.(*AuthHandler).Login-fm (4 handlers)
[GIN-debug] POST   /api/v1/auth/verify-email --> healthy_pay_backend/internal/handlers.(*AuthHandler).VerifyEmail-fm (4 handlers)
[GIN-debug] POST   /api/v1/auth/send-verification --> healthy_pay_backend/internal/handlers.(*AuthHandler).SendVerification-fm (4 handlers)
[GIN-debug] POST   /api/v1/auth/google       --> healthy_pay_backend/internal/handlers.(*SocialHandler).GoogleLogin-fm (4 handlers)
[GIN-debug] POST   /api/v1/auth/facebook     --> healthy_pay_backend/internal/handlers.(*SocialHandler).FacebookLogin-fm (4 handlers)
[GIN-debug] POST   /api/v1/auth/apple        --> healthy_pay_backend/internal/handlers.(*SocialHandler).AppleLogin-fm (4 handlers)
[GIN-debug] POST   /api/v1/otp/send          --> healthy_pay_backend/internal/handlers.(*OTPHandler).SendOTP-fm (4 handlers)
[GIN-debug] POST   /api/v1/otp/verify        --> healthy_pay_backend/internal/handlers.(*OTPHandler).VerifyOTP-fm (4 handlers)
[GIN-debug] GET    /api/v1/test              --> healthy_pay_backend/internal/routes.SetupRoutes.func2 (5 handlers)
[GIN-debug] POST   /api/v1/auth/setup-pin    --> healthy_pay_backend/internal/handlers.(*AuthHandler).SetupPIN-fm (5 handlers)
[GIN-debug] POST   /api/v1/auth/setup-payment-method --> healthy_pay_backend/internal/handlers.(*AuthHandler).SetupPaymentMethod-fm (5 handlers)
[GIN-debug] GET    /api/v1/auth/payment-method --> healthy_pay_backend/internal/handlers.(*AuthHandler).GetPaymentMethod-fm (5 handlers)
[GIN-debug] GET    /api/v1/user/profile      --> healthy_pay_backend/internal/handlers.(*UserHandler).GetProfile-fm (5 handlers)
[GIN-debug] PUT    /api/v1/user/profile      --> healthy_pay_backend/internal/handlers.(*UserHandler).UpdateProfile-fm (5 handlers)
[GIN-debug] POST   /api/v1/kyc/upload-document --> healthy_pay_backend/internal/handlers.(*KYCHandler).UploadDocument-fm (5 handlers)
[GIN-debug] POST   /api/v1/kyc/setup-profile --> healthy_pay_backend/internal/handlers.(*KYCHandler).SetupProfile-fm (5 handlers)
[GIN-debug] GET    /api/v1/wallet            --> healthy_pay_backend/internal/handlers.(*WalletHandler).GetBalance-fm (5 handlers)
[GIN-debug] GET    /api/v1/wallet/balance    --> healthy_pay_backend/internal/handlers.(*WalletHandler).GetBalance-fm (5 handlers)
[GIN-debug] POST   /api/v1/wallet/add-funds  --> healthy_pay_backend/internal/handlers.(*WalletHandler).AddFunds-fm (5 handlers)
[GIN-debug] POST   /api/v1/wallet/create-blockchain --> healthy_pay_backend/internal/handlers.(*WalletHandler).CreateBlockchainWallet-fm (5 handlers)
[GIN-debug] POST   /api/v1/wallet/activate-blockchain --> healthy_pay_backend/internal/handlers.(*WalletHandler).ActivateBlockchain-fm (5 handlers)
[GIN-debug] GET    /api/v1/wallet/supported-blockchains --> healthy_pay_backend/internal/handlers.(*WalletHandler).GetSupportedBlockchains-fm (5 handlers)
[GIN-debug] GET    /api/v1/send/payment-methods --> healthy_pay_backend/internal/handlers.(*TransactionHandler).GetPaymentMethods-fm (5 handlers)
[GIN-debug] GET    /api/v1/send/recipients   --> healthy_pay_backend/internal/handlers.(*TransactionHandler).GetRecipients-fm (5 handlers)
[GIN-debug] GET    /api/v1/send/delivery-options --> healthy_pay_backend/internal/handlers.(*TransactionHandler).GetRecipientDeliveryOptions-fm (5 handlers)
[GIN-debug] GET    /api/v1/send/mobile-networks --> healthy_pay_backend/internal/handlers.(*TransactionHandler).GetMobileNetworks-fm (5 handlers)
[GIN-debug] POST   /api/v1/send/money        --> healthy_pay_backend/internal/handlers.(*TransactionHandler).SendMoney-fm (5 handlers)
[GIN-debug] POST   /api/v1/mobile-money/add-wallet --> healthy_pay_backend/internal/handlers.(*MobileMoneyHandler).AddMobileWallet-fm (5 handlers)
[GIN-debug] GET    /api/v1/mobile-money/wallets --> healthy_pay_backend/internal/handlers.(*MobileMoneyHandler).GetMobileWallets-fm (5 handlers)
[GIN-debug] POST   /api/v1/transactions/send --> healthy_pay_backend/internal/handlers.(*TransactionHandler).SendMoney-fm (5 handlers)
[GIN-debug] GET    /api/v1/transactions/     --> healthy_pay_backend/internal/handlers.(*TransactionHandler).GetTransactions-fm (5 handlers)
[GIN-debug] GET    /api/v1/transactions/:id/status --> healthy_pay_backend/internal/handlers.(*TransactionHandler).CheckTransactionStatus-fm (5 handlers)
[GIN-debug] POST   /api/v1/transactions/process-pending --> healthy_pay_backend/internal/handlers.(*TransactionHandler).ProcessPendingTransactions-fm (5 handlers)
[GIN-debug] GET    /api/v1/stellar/info      --> healthy_pay_backend/internal/handlers.(*StellarWalletHandler).GetWalletInfo-fm (5 handlers)
[GIN-debug] POST   /api/v1/stellar/wallet    --> healthy_pay_backend/internal/handlers.(*StellarWalletHandler).CreateWallet-fm (5 handlers)
[GIN-debug] GET    /api/v1/stellar/wallet    --> healthy_pay_backend/internal/handlers.(*StellarWalletHandler).GetWallet-fm (5 handlers)
[GIN-debug] POST   /api/v1/stellar/send-usdc --> healthy_pay_backend/internal/handlers.(*StellarWalletHandler).SendUSDC-fm (5 handlers)
[GIN-debug] GET    /api/v1/stellar/transactions --> healthy_pay_backend/internal/handlers.(*StellarWalletHandler).GetTransactions-fm (5 handlers)
[GIN-debug] GET    /api/v1/stellar/asset-info --> healthy_pay_backend/internal/handlers.(*StellarWalletHandler).GetAssetInfo-fm (5 handlers)
[GIN-debug] POST   /api/v1/investments/      --> healthy_pay_backend/internal/handlers.(*InvestmentHandler).CreateInvestment-fm (5 handlers)
[GIN-debug] GET    /api/v1/investments/      --> healthy_pay_backend/internal/handlers.(*InvestmentHandler).GetInvestments-fm (5 handlers)
[GIN-debug] GET    /api/v1/psp/providers     --> healthy_pay_backend/internal/handlers.(*PSPHandler).GetAvailablePSPs-fm (5 handlers)
[GIN-debug] GET    /api/v1/psp/recommend     --> healthy_pay_backend/internal/handlers.(*PSPHandler).GetPSPForProvider-fm (5 handlers)
[GIN-debug] POST   /api/v1/psp/test/:psp     --> healthy_pay_backend/internal/handlers.(*PSPHandler).TestPSPConnection-fm (5 handlers)
[GIN-debug] GET    /api/v1/rates/onramp      --> healthy_pay_backend/internal/handlers.(*RateHandler).GetOnrampRate-fm (5 handlers)
[GIN-debug] GET    /api/v1/rates/offramp     --> healthy_pay_backend/internal/handlers.(*RateHandler).GetOfframpRate-fm (5 handlers)
[GIN-debug] GET    /api/v1/rates/convert     --> healthy_pay_backend/internal/handlers.(*RateHandler).ConvertAmount-fm (5 handlers)
[GIN-debug] GET    /api/v1/rates/all         --> healthy_pay_backend/internal/handlers.(*RateHandler).GetAllRates-fm (5 handlers)
[GIN-debug] POST   /api/v1/deposits/initiate --> healthy_pay_backend/internal/handlers.(*DepositHandler).InitiateDeposit-fm (5 handlers)
[GIN-debug] GET    /api/v1/deposits/:id/status --> healthy_pay_backend/internal/handlers.(*DepositHandler).CheckDepositStatus-fm (5 handlers)
[GIN-debug] GET    /api/v1/deposits/         --> healthy_pay_backend/internal/handlers.(*DepositHandler).GetDeposits-fm (5 handlers)
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.
[GIN-debug] Listening and serving HTTP on :8080
Creating onchain wallet for user 691f9026c6907a69d0f77d44 - Blockchain: stellar, Stablecoin: USDC
No existing wallet found, creating new stellar wallet...
Creating Stellar wallet on mainnet network
Error creating wallet: failed to create stellar wallet: failed to establish trust line: failed to submit sponsored account creation transaction: horizon error: "Transaction Failed" (tx_failed, op_success, op_low_reserve, op_no_source_account, op_already_sponsored, op_no_source_account, op_no_source_account) - check horizon.Error.Problem for more information
Failed to ensure onchain wallet: failed to create stellar wallet: failed to establish trust line: failed to submit sponsored account creation transaction: horizon error: "Transaction Failed" (tx_failed, op_success, op_low_reserve, op_no_source_account, op_already_sponsored, op_no_source_account, op_no_source_account) - check horizon.Error.Problem for more information
[GIN] 2025/11/20 - 23:05:43 | 200 |  9.027753459s |             ::1 | POST     "/api/v1/auth/login"
2025/11/20 23:05:43 PSP Request [ogate] InitiateCollection: {"amount":0.5,"phoneNumber":"+233542853417","provider":"MTN","reference":"DEP_1763679943_691f9026"}
2025/11/20 23:05:43 PSP Request to https://api.ogateway.io/collections/mobilemoney: {"amount":0,"reason":"Collection with reference DEP_1763679943_691f9026","currency":"GHS","network":"MTN","accountName":"Customer","accountNumber":"+233542853417","reference":"DEP_1763679943_691f9026"}
2025/11/20 23:05:45 PSP Response from https://api.ogateway.io/collections/mobilemoney: {"id":"a87337c3-879c-4c7c-a67a-3ee170436419","amount":0,"fee":0,"currency":"GHS","status":"INITIATED","channel":"MOMO","type":"DEBIT","customer":{"email":"","accountName":"Customer","accountNumber":"+233542853417"},"metadata":{"smsFee":0},"reason":"Collection with reference DEP_1763679943_691f9026","network":"MTN","checkout_url":null,"provider_message":"Pending","reference_business":"DEP_1763679943_691f9026","created_at":"2025-11-20T23:05:46.852Z","updated_at":"2025-11-20T23:05:46.852Z","virtual_account":null,"error_message":null,"telco_response":null,"instructions":"If no prompt pops up, pls check your Approval List by dialing *170# and choosing option 6 then option 3."}
2025/11/20 23:05:45 PSP Response [ogate] InitiateCollection: {"transactionId":"a87337c3-879c-4c7c-a67a-3ee170436419","status":"pending","message":"Collection initiated successfully","pspName":"","rawResponse":{"amount":0,"channel":"MOMO","checkout_url":null,"created_at":"2025-11-20T23:05:46.852Z","currency":"GHS","customer":{"accountName":"Customer","accountNumber":"+233542853417","email":""},"error_message":null,"fee":0,"id":"a87337c3-879c-4c7c-a67a-3ee170436419","instructions":"If no prompt pops up, pls check your Approval List by dialing *170# and choosing option 6 then option 3.","metadata":{"smsFee":0},"network":"MTN","provider_message":"Pending","reason":"Collection with reference DEP_1763679943_691f9026","reference_business":"DEP_1763679943_691f9026","status":"INITIATED","telco_response":null,"type":"DEBIT","updated_at":"2025-11-20T23:05:46.852Z","virtual_account":null}} - Status: success
[GIN] 2025/11/20 - 23:05:45 | 200 |   2.10803275s |             ::1 | POST     "/api/v1/deposits/initiate"
